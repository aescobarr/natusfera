jQuery.url=function(){var segments={},parsed={},options={url:window.location,strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},parseUri=function(){str=decodeURI(options.url);for(var m=options.parser[options.strictMode?"strict":"loose"].exec(str),uri={},i=14;i--;)uri[options.key[i]]=m[i]||"";return uri[options.q.name]={},uri[options.key[12]].replace(options.q.parser,function($0,$1,$2){$1&&(uri[options.q.name][$1]=$2)}),uri},key=function(key){return parsed.length||setUp(),"base"==key?null!==parsed.port&&""!==parsed.port?parsed.protocol+"://"+parsed.host+":"+parsed.port+"/":parsed.protocol+"://"+parsed.host+"/":""===parsed[key]?null:parsed[key]},param=function(item){return parsed.length||setUp(),null===parsed.queryKey[item]?null:parsed.queryKey[item]},setUp=function(){parsed=parseUri(),getSegments()},getSegments=function(){var p=parsed.path;segments=[],segments=1==parsed.path.length?{}:("/"==p.charAt(p.length-1)?p.substring(1,p.length-1):path=p.substring(1)).split("/")};return{setMode:function(mode){return strictMode="strict"==mode?!0:!1,this},setUrl:function(newUri){return options.url=void 0===newUri?window.location:newUri,setUp(),this},segment:function(pos){return parsed.length||setUp(),void 0===pos?segments.length:""===segments[pos]||void 0===segments[pos]?null:segments[pos]},attr:key,param:param}}();