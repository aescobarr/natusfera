jQuery.extend({__stringPrototype:{JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,ScriptFragment:"<script[^>]*>([\\S\\s]*?)</script>",specialChar:{"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"},blank:function(s){return/^\s*$/.test(this.s(s)||" ")},camelize:function(s){var i,a=this.s(s).split("-");for(s=[a[0]],i=1;i<a.length;i++)s.push(a[i].charAt(0).toUpperCase()+a[i].substring(1));return s=s.join(""),this.r(arguments,0,s)},capitalize:function(s){return s=this.s(s),s=s.charAt(0).toUpperCase()+s.substring(1).toLowerCase(),this.r(arguments,0,s)},dasherize:function(s){return s=this.s(s).split("_").join("-"),this.r(arguments,0,s)},empty:function(s){return""===this.s(s)},endsWith:function(pattern,s){s=this.s(s);var d=s.length-pattern.length;return d>=0&&s.lastIndexOf(pattern)===d},escapeHTML:function(s){return s=this.s(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.r(arguments,0,s)},evalJSON:function(sanitize,s){s=this.s(s);var json=this.unfilterJSON(!1,s);try{if(!sanitize||this.isJSON(json))return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+s)},evalScripts:function(s){var scriptTags=this.extractScripts(this.s(s)),results=[];if(scriptTags.length>0)for(var i=0;i<scriptTags.length;i++)results.push(eval(scriptTags[i]));return results},extractScripts:function(s){var matchAll=new RegExp(this.ScriptFragment,"img"),matchOne=new RegExp(this.ScriptFragment,"im"),scriptMatches=this.s(s).match(matchAll)||[],scriptTags=[];if(scriptMatches.length>0)for(var i=0;i<scriptMatches.length;i++)scriptTags.push(scriptMatches[i].match(matchOne)[1]||"");return scriptTags},gsub:function(pattern,replacement,s){return s=this.s(s),s=jQuery.isFunction(replacement)?this.sub(pattern,replacement,-1,s):s.split(pattern).join(replacement),this.r(arguments,2,s)},include:function(pattern,s){return this.s(s).indexOf(pattern)>-1},inspect:function(useDoubleQuotes,s){s=this.s(s);var escapedString;try{escapedString=this.sub(/[\x00-\x1f\\]/,function(match){var character=jQuery.__stringPrototype.specialChar[match[0]];return character?character:"\\u00"+match[0].charCodeAt().toPaddedString(2,16)},-1,s)}catch(e){escapedString=s}return s=useDoubleQuotes?'"'+escapedString.replace(/"/g,'\\"')+'"':"'"+escapedString.replace(/'/g,"\\'")+"'",this.r(arguments,1,s)},interpolate:function(obj,pattern,s){s=this.s(s),pattern||(pattern=/(\#\{\s*(\w+)\s*\})/);var i,gpattern=new RegExp(pattern.source,"g"),matches=s.match(gpattern);for(i=0;i<matches.length;i++)s=s.replace(matches[i],obj[matches[i].match(pattern)[2]]);return this.r(arguments,2,s)},isJSON:function(s){return s=this.s(s),this.blank(s)?!1:(s=s.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(s))},scan:function(pattern,replacement,s){return s=this.s(s),this.sub(pattern,replacement,-1,s),this.r(arguments,2,s)},startsWith:function(pattern,s){return 0===this.s(s).indexOf(pattern)},strip:function(s){return s=jQuery.trim(this.s(s)),this.r(arguments,0,s)},stripScripts:function(s){return s=this.s(s).replace(new RegExp(this.ScriptFragment,"img"),""),this.r(arguments,0,s)},stripTags:function(s){return s=this.s(s).replace(/<\/?[^>]+>/gi,""),this.r(arguments,0,s)},sub:function(pattern,replacement,count,s){if(s=this.s(s),pattern.source&&!pattern.global){var patternMods=pattern.ignoreCase?"ig":"g";patternMods+=pattern.multiline?"m":"",pattern=new RegExp(pattern.source,patternMods)}var sarray=s.split(pattern),matches=s.match(pattern);jQuery.browser.msie&&(0==s.indexOf(matches[0])&&sarray.unshift(""),s.lastIndexOf(matches[matches.length-1])==s.length-matches[matches.length-1].length&&sarray.push("")),count=0>count?sarray.length-1:count||1,s=sarray[0];for(var i=1;i<sarray.length;i++)s+=count>=i?jQuery.isFunction(replacement)?replacement(matches[i-1]||matches)+sarray[i]:replacement+sarray[i]:(matches[i-1]||matches)+sarray[i];return this.r(arguments,3,s)},succ:function(s){return s=this.s(s),s=s.slice(0,s.length-1)+String.fromCharCode(s.charCodeAt(s.length-1)+1),this.r(arguments,0,s)},times:function(count,s){s=this.s(s);for(var newS="",i=0;count>i;i++)newS+=s;return this.r(arguments,1,newS)},toJSON:function(s){return this.r(arguments,0,this.inspect(!0,this.s(s)))},toQueryParams:function(separator,s){s=this.s(s);var i,key,value,pair,paramsList=s.substring(s.indexOf("?")+1).split("#")[0].split(separator||"&"),params={};for(i=0;i<paramsList.length;i++)pair=paramsList[i].split("="),key=decodeURIComponent(pair[0]),value=pair[1]?decodeURIComponent(pair[1]):void 0,params[key]?("string"==typeof params[key]&&(params[key]=[params[key]]),params[key].push(value)):params[key]=value;return params},truncate:function(length,truncation,s){return s=this.s(s),length=length||30,truncation=truncation?truncation:"...",s=s.length>length?s.slice(0,length-truncation.length)+truncation:String(s),this.r(arguments,2,s)},underscore:function(s){return s=this.sub(/[A-Z]/,function(c){return"_"+c.toLowerCase()},-1,this.s(s)),"_"==s.charAt(0)&&(s=s.substring(1)),this.r(arguments,0,s)},unescapeHTML:function(s){return s=this.stripTags(this.s(s)).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.r(arguments,0,s)},unfilterJSON:function(filter,s){s=this.s(s),filter=filter||this.JSONFilter;var filtered=s.match(filter);return s=null!==filtered?filtered[1]:s,this.r(arguments,1,jQuery.trim(s))},r:function(args,size,s){return args.length>size||void 0===this.str?s:(this.str=""+s,this)},s:function(s){return""===s||s?s:""===this.str||this.str?this.str:this}},string:function(str){return str!==String.prototype?jQuery.extend({str:str},jQuery.__stringPrototype):(jQuery.extend(String.prototype,jQuery.__stringPrototype),void 0)}}),jQuery.__stringPrototype.parseQuery=jQuery.__stringPrototype.toQueryParams;