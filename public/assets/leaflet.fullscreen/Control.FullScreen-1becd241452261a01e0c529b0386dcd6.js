L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",forceSeparateButton:!1},onAdd:function(map){var container,className="leaflet-control-zoom-fullscreen";return container=map.zoomControl&&!this.options.forceSeparateButton?map.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this._createButton(this.options.title,className,container,this.toogleFullScreen,map),container},_createButton:function(title,className,container,fn,context){var link=L.DomUtil.create("a",className,container);return link.href="#",link.title=title,L.DomEvent.addListener(link,"click",L.DomEvent.stopPropagation).addListener(link,"click",L.DomEvent.preventDefault).addListener(link,"click",fn,context),L.DomEvent.addListener(container,fullScreenApi.fullScreenEventName,L.DomEvent.stopPropagation).addListener(container,fullScreenApi.fullScreenEventName,L.DomEvent.preventDefault).addListener(container,fullScreenApi.fullScreenEventName,this._handleEscKey,context),L.DomEvent.addListener(document,fullScreenApi.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,fullScreenApi.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,fullScreenApi.fullScreenEventName,this._handleEscKey,context),link},toogleFullScreen:function(){this._exitFired=!1;var container=this._container;this._isFullscreen?(fullScreenApi.supportsFullScreen?fullScreenApi.cancelFullScreen(container):L.DomUtil.removeClass(container,"leaflet-pseudo-fullscreen"),this.invalidateSize(),this.fire("exitFullscreen"),this._exitFired=!0,this._isFullscreen=!1):(fullScreenApi.supportsFullScreen?fullScreenApi.requestFullScreen(container):L.DomUtil.addClass(container,"leaflet-pseudo-fullscreen"),this.invalidateSize(),this.fire("enterFullscreen"),this._isFullscreen=!0)},_handleEscKey:function(){fullScreenApi.isFullScreen(this)||this._exitFired||(this.fire("exitFullscreen"),this._exitFired=!0,this._isFullscreen=!1)}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions),this.addControl(this.fullscreenControl))}),L.control.fullscreen=function(options){return new L.Control.FullScreen(options)},function(){var fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.exitFullscreen)fullScreenApi.supportsFullScreen=!0;else for(var i=0,il=browserPrefixes.length;il>i;i++)if(fullScreenApi.prefix=browserPrefixes[i],"undefined"!=typeof document[fullScreenApi.prefix+"CancelFullScreen"]){fullScreenApi.supportsFullScreen=!0;break}fullScreenApi.supportsFullScreen&&(fullScreenApi.fullScreenEventName=fullScreenApi.prefix+"fullscreenchange",fullScreenApi.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},fullScreenApi.requestFullScreen=function(el){return""===this.prefix?el.requestFullscreen():el[this.prefix+"RequestFullScreen"](Element.ALLOW_KEYBOARD_INPUT)},fullScreenApi.cancelFullScreen=function(){return""===this.prefix?document.exitFullscreen():document[this.prefix+"CancelFullScreen"]()}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var el=jQuery(this);fullScreenApi.supportsFullScreen&&fullScreenApi.requestFullScreen(el)})}),window.fullScreenApi=fullScreenApi}();