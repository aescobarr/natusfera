if(!org)var org={};org.polymaps||(org.polymaps={}),function(r){function ea(d){var h=d.indexOf(":");return 0>h?d:{space:r.ns[d.substring(0,h)],local:d.substring(h+1)}}function R(){for(var d=0;d<R.maps.length;d++)R.maps[d].resize()}function V(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function W(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function Z(d,h){if(d.row>h.row){var a=d;d=h,h=a}return{x0:d.column,y0:d.row,x1:h.column,y1:h.row,dx:h.column-d.column,dy:h.row-d.row}}function ba(d,h,a,m,e){if(a=Math.max(a,Math.floor(h.y0)),m=Math.min(m,Math.ceil(h.y1)),d.x0==h.x0&&d.y0==h.y0?d.x0+h.dy/d.dy*d.dx<h.x1:d.x1-h.dy/d.dy*d.dx<h.x0){var c=d;d=h,h=c}c=d.dx/d.dy;var g=h.dx/h.dy,k=d.dx>0,t=h.dx<0;for(a=a;m>a;a++){var n=c*Math.max(0,Math.min(d.dy,a+k-d.y0))+d.x0;e(Math.floor(g*Math.max(0,Math.min(h.dy,a+t-h.y0))+h.x0),Math.ceil(n),a)}}function ca(d,h,a,m,e,c){var g=Z(d,h);h=Z(h,a),d=Z(a,d),g.dy>h.dy&&(a=g,g=h,h=a),g.dy>d.dy&&(a=g,g=d,d=a),h.dy>d.dy&&(a=h,h=d,d=a),g.dy&&ba(d,g,m,e,c),h.dy&&ba(d,h,m,e,c)}r.version="2.5.0";var Y={x:0,y:0};r.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},r.id=function(){var d=0;return function(){return++d}}(),r.svg=function(d){return document.createElementNS(r.ns.svg,d)},r.transform=function(d,h,a,m,e,c){var k,t,n,g={};return arguments.length||(d=1,h=e=a=0,m=1,c=0),g.zoomFraction=function(l){return arguments.length?(t=l,k=Math.floor(t+Math.log(Math.sqrt(d*d+h*h+a*a+m*m))/Math.LN2),n=Math.pow(2,-k),g):t},g.apply=function(l){var i=Math.pow(2,-l.zoom),q=Math.pow(2,l.zoom-k);return{column:(d*l.column*i+a*l.row*i+e)*q,row:(h*l.column*i+m*l.row*i+c)*q,zoom:l.zoom-k}},g.unapply=function(l){var i=Math.pow(2,-l.zoom),q=Math.pow(2,l.zoom+k);return{column:(l.column*i*m-l.row*i*a-e*m+c*a)/(d*m-h*a)*q,row:(l.column*i*h-l.row*i*d-e*h+c*d)/(a*h-m*d)*q,zoom:l.zoom+k}},g.toString=function(){return"matrix("+[d*n,h*n,a*n,m*n].join(" ")+" 0 0)"},g.zoomFraction(0)},r.cache=function(d,h){function a(i){l--,h&&h(i),delete g[i.key],i.next?i.next.prev=i.prev:(t=i.prev)&&(t.next=null),i.prev?i.prev.next=i.next:(k=i.next)&&(k.prev=null)}function m(){for(var i=t;l>n&&i;i=i.prev)i.lock||a(i)}var e={},c={},g={},k=null,t=null,n=64,l=0;return e.peek=function(i){return g[[i.zoom,i.column,i.row].join("/")]},e.load=function(i,q){var w=[i.zoom,i.column,i.row].join("/"),A=g[w];return A?(A.prev&&((A.prev.next=A.next)?A.next.prev=A.prev:t=A.prev,A.prev=null,A.next=k,k=k.prev=A),A.lock=1,c[w]=A):(A={key:w,column:i.column,row:i.row,zoom:i.zoom,next:k,prev:null,lock:1},d.call(null,A,q),c[w]=g[w]=A,k?k.prev=A:t=A,k=A,l++,A)},e.unload=function(i){if(!(i in c))return!1;var q=c[i];return q.lock=0,delete c[i],q.request&&q.request.abort(!1)&&a(q),q},e.locks=function(){return c},e.size=function(i){return arguments.length?(n=i,m(),e):n},e.flush=function(){return m(),e},e.clear=function(){for(var i in g){var q=g[i];q.request&&q.request.abort(!1),h&&h(g[i]),q.lock&&(q.lock=0,q.element.parentNode.removeChild(q.element))}return c={},g={},k=t=null,l=0,e},e},r.url=function(d){function h(e){var c=e.zoom<0?1:1<<e.zoom,g=e.column;if(m)g=e.column%c,0>g&&(g+=c);else if(0>g||g>=c)return null;return d.replace(/{(.)}/g,function(k,t){switch(t){case"S":return a[(Math.abs(e.zoom)+e.row+g)%a.length];case"Z":return e.zoom;case"X":return g;case"Y":return e.row;case"B":var n=r.map.coordinateLocation({row:e.row,column:g,zoom:e.zoom}),l=r.map.coordinateLocation({row:e.row+1,column:g+1,zoom:e.zoom}),i=Math.ceil(Math.log(e.zoom)/Math.LN2);return l.lat.toFixed(i)+","+n.lon.toFixed(i)+","+n.lat.toFixed(i)+","+l.lon.toFixed(i)}return t})}var a=[],m=!0;return h.template=function(e){return arguments.length?(d=e,h):d},h.hosts=function(e){return arguments.length?(a=e,h):a},h.repeat=function(e){return arguments.length?(m=e,h):m},h},r.dispatch=function(d){var h={};return d.on=function(a,m){for(var e=h[a]||(h[a]=[]),c=0;c<e.length;c++)if(e[c].handler==m)return d;return e.push({handler:m,on:!0}),d},d.off=function(a,m){var e=h[a];if(e)for(var c=0;c<e.length;c++){var g=e[c];if(g.handler==m){g.on=!1,e.splice(c,1);break}}return d},function(a){var m=h[a.type];if(m){m=m.slice();for(var e=0;e<m.length;e++){var c=m[e];c.on&&c.handler.call(d,a)}}}},r.queue=function(){function d(){e>=c||!m.length||(e++,m.pop()())}function h(g){for(var k=0;k<m.length;k++)if(m[k]==g)return m.splice(k,1),!0;return!1}function a(g,k,t){function n(){l=new XMLHttpRequest,t&&l.overrideMimeType(t),l.open("GET",g,!0),l.onreadystatechange=function(){4==l.readyState&&(e--,l.status<300&&k(l),d())},l.send(null)}var l;return m.push(n),d(),{abort:function(i){return h(n)?!0:i&&l?(l.abort(),!0):!1}}}var m=[],e=0,c=6;return{text:function(g,k,t){return a(g,function(n){n.responseText&&k(n.responseText)},t)},xml:function(g,k){return a(g,function(t){t.responseXML&&k(t.responseXML)},"application/xml")},json:function(g,k){return a(g,function(t){t.responseText&&k(JSON.parse(t.responseText))},"application/json")},image:function(g,k,t){function n(){l=document.createElement("img"),l.onerror=function(){e--,d()},l.onload=function(){e--,t(l),d()},l.src=k,g.setAttributeNS(r.ns.xlink,"href",k)}var l;return m.push(n),d(),{abort:function(i){return h(n)?!0:i&&l?(l.src="about:",!0):!1}}}}}(),r.map=function(){function d(){q&&(n<q[0]?n=q[0]:n>q[1]&&(n=q[1])),l=n-(n=Math.round(n)),i=Math.pow(2,l)}function h(){if(o){var f=45/Math.pow(2,n+l-3),u=Math.max(Math.abs(C*g.x+A*g.y),Math.abs(B*g.x+E*g.y)),s=V(K-u*f/k.y);u=V(j+u*f/k.y),t.lat=Math.max(s,Math.min(u,t.lat)),s=Math.max(Math.abs(C*g.y+A*g.x),Math.abs(B*g.y+E*g.x)),t.lon=Math.max(o[0].lon-s*f/k.x,Math.min(o[1].lon+s*f/k.x,t.lon))}}var m,e,a={},c=Y,g=Y,k={x:256,y:256},t={lat:37.76487,lon:-122.41948},n=12,l=0,i=1,q=[1,18],w=0,A=1,C=0,E=1,B=0,K=-180,j=180,o=[{lat:V(K),lon:-1/0},{lat:V(j),lon:1/0}];a.locationCoordinate=function(f){f=r.map.locationCoordinate(f);var u=Math.pow(2,n);return f.column*=u,f.row*=u,f.zoom+=n,f},a.coordinateLocation=r.map.coordinateLocation,a.coordinatePoint=function(f,u){var s=Math.pow(2,n-u.zoom),z=Math.pow(2,n-f.zoom),v=(u.column*s-f.column*z)*k.x*i;return s=(u.row*s-f.row*z)*k.y*i,{x:g.x+A*v-C*s,y:g.y+C*v+A*s}},a.pointCoordinate=function(f,u){var s=Math.pow(2,n-f.zoom),z=(u.x-g.x)/i,v=(u.y-g.y)/i;return{column:f.column*s+(E*z-B*v)/k.x,row:f.row*s+(B*z+E*v)/k.y,zoom:n}},a.locationPoint=function(f){var u=Math.pow(2,n+l-3)/45,s=(f.lon-t.lon)*u*k.x;return f=(W(t.lat)-W(f.lat))*u*k.y,{x:g.x+A*s-C*f,y:g.y+C*s+A*f}},a.pointLocation=function(f){var u=45/Math.pow(2,n+l-3),s=(f.x-g.x)*u;return f=(f.y-g.y)*u,{lon:t.lon+(E*s-B*f)/k.x,lat:V(W(t.lat)-(B*s+E*f)/k.y)}};var x=r.svg("rect");return x.setAttribute("visibility","hidden"),x.setAttribute("pointer-events","all"),a.container=function(f){return arguments.length?(m=f,m.setAttribute("class","map"),m.appendChild(x),a.resize()):m},a.focusableParent=function(){for(var f=m;f;f=f.parentNode)if(f.tabIndex>=0)return f;return window},a.mouse=function(f){var u=(m.ownerSVGElement||m).createSVGPoint();if(0>$&&(window.scrollX||window.scrollY)){var s=document.body.appendChild(r.svg("svg"));s.style.position="absolute",s.style.top=s.style.left="0px";var z=s.getScreenCTM();$=!(z.f||z.e),document.body.removeChild(s)}return $?(u.x=f.pageX,u.y=f.pageY):(u.x=f.clientX,u.y=f.clientY),u.matrixTransform(m.getScreenCTM().inverse())},a.size=function(f){return arguments.length?(e=f,a.resize()):c},a.resize=function(){return e?(c=e,R.remove(a)):(x.setAttribute("width","100%"),x.setAttribute("height","100%"),b=x.getBBox(),c={x:b.width,y:b.height},R.add(a)),x.setAttribute("width",c.x),x.setAttribute("height",c.y),g={x:c.x/2,y:c.y/2},h(),a.dispatch({type:"resize"}),a},a.tileSize=function(f){return arguments.length?(k=f,a.dispatch({type:"move"}),a):k},a.center=function(f){return arguments.length?(t=f,h(),a.dispatch({type:"move"}),a):t},a.panBy=function(f){var u=45/Math.pow(2,n+l-3),s=f.x*u;return f=f.y*u,a.center({lon:t.lon+(B*f-E*s)/k.x,lat:V(W(t.lat)+(B*s+E*f)/k.y)})},a.centerRange=function(f){return arguments.length?((o=f)?(K=o[0].lat>-90?W(o[0].lat):-1/0,j=o[0].lat<90?W(o[1].lat):1/0):(K=-1/0,j=1/0),h(),a.dispatch({type:"move"}),a):o},a.zoom=function(f){return arguments.length?(n=f,d(),a.center(t)):n+l},a.zoomBy=function(f,u,s){if(arguments.length<2)return a.zoom(n+l+f);arguments.length<3&&(s=a.pointLocation(u)),n=n+l+f,d();var z=a.locationPoint(s);return a.panBy({x:u.x-z.x,y:u.y-z.y})},a.zoomRange=function(f){return arguments.length?(q=f,a.zoom(n+l)):q},a.extent=function(f){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var u=a.locationPoint(f[0]),s=a.locationPoint(f[1]),z=Math.max((s.x-u.x)/c.x,(u.y-s.y)/c.y);return u=a.pointLocation({x:(u.x+s.x)/2,y:(u.y+s.y)/2}),n=n+l-Math.log(z)/Math.LN2,d(),a.center(u)},a.angle=function(f){return arguments.length?(w=f,A=Math.cos(w),C=Math.sin(w),E=Math.cos(-w),B=Math.sin(-w),h(),a.dispatch({type:"move"}),a):w},a.add=function(f){return f.map(a),a},a.remove=function(f){return f.map(null),a},a.dispatch=r.dispatch(a),a},R.maps=[],R.add=function(d){for(var h=0;h<R.maps.length;h++)if(R.maps[h]==d)return;R.maps.push(d)},R.remove=function(d){for(var h=0;h<R.maps.length;h++)if(R.maps[h]==d)return R.maps.splice(h,1),void 0},window.addEventListener("resize",R,!1),window.addEventListener("load",R,!1),r.map.locationCoordinate=function(d){var h=1/360;return{column:(d.lon+180)*h,row:(180-W(d.lat))*h,zoom:0}},r.map.coordinateLocation=function(d){var h=45/Math.pow(2,d.zoom-3);return{lon:h*d.column-180,lat:V(180-h*d.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;r.layer=function(d,h){function a(B){for(var K=C[0].nextSibling;B>A;A++){q.insertBefore(C[-4],K),q.insertBefore(C[2],K),q.insertBefore(C[1],K);for(var j=C[-4],o=-4;2>o;)C[o]=C[++o];C[o]=j}}function m(B){for(var K=C[0].nextSibling;A>B;A--){q.insertBefore(C[-1],K),q.insertBefore(C[2],C[-4]);for(var j=C[2],o=2;o>-4;)C[o]=C[--o];C[o]=j}}function e(){function B(N){var H=N.zoom,T=0>H?1:1<<H,U=N.column%T,y=N.row;return 0>U&&(U+=T),{locationPoint:function(D){D=r.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:s.x*(G*D.column-U),y:s.y*(G*D.row-y)}}}}function K(N,H,T){var U=I.zoom,y=2-S,D=4+S;for(N=N;H>N;N++){var G=g.load({column:N,row:T,zoom:U},B);if(!(G.ready||G.key in O)){G.proxyRefs={};for(var J,M,P,Q=1;y>=Q;Q++){M=!0;for(var X=0,da=1<<Q;da>=X;X++)for(var aa=0;da>=aa;aa++)(P=g.peek(J={column:(N<<Q)+aa,row:(T<<Q)+X,zoom:U+Q}))&&P.ready?(O[P.key]=g.load(J),P.proxyCount++,G.proxyRefs[P.key]=P):M=!1;if(M)break}if(!M)for(Q=1;D>=Q;Q++)if((P=g.peek(J={column:N>>Q,row:T>>Q,zoom:U-Q}))&&P.ready){O[P.key]=g.load(J),P.proxyCount++,G.proxyRefs[P.key]=P;break}}O[G.key]=G}}var j=c.map(),o=j.zoom(),x=o-(o=Math.round(o)),f=j.size(),u=j.angle(),s=j.tileSize(),z=j.locationCoordinate(j.center());if(A!=o){o>A?a(o):A>o?m(o):A=o;for(var v=-4;2>=v;v++){var L=C[v];L.setAttribute("class","zoom"+(0>v?"":"+")+v+" zoom"+(o+v)),L.setAttribute("transform","scale("+Math.pow(2,-v)+")")}}q.setAttribute("transform","translate("+f.x/2+","+f.y/2+")"+(u?"rotate("+180*(u/Math.PI)+")":"")+(x?"scale("+Math.pow(2,x)+")":"")+(w?w.zoomFraction(x):""));var I=j.pointCoordinate(z,Y);v=j.pointCoordinate(z,{x:f.x,y:0}),o=j.pointCoordinate(z,f),j=j.pointCoordinate(z,{x:0,y:f.y}),x||u||w||(z.column=(Math.round(s.x*z.column)+(1&f.x)/2)/s.x,z.row=(Math.round(s.y*z.row)+(1&f.y)/2)/s.y),w&&(I=w.unapply(I),v=w.unapply(v),o=w.unapply(o),j=w.unapply(j),z=w.unapply(z));var S=n?n(I.zoom)-I.zoom:0;S&&(f=Math.pow(2,S),I.column*=f,I.row*=f,v.column*=f,v.row*=f,o.column*=f,o.row*=f,j.column*=f,j.row*=f,I.zoom=v.zoom=o.zoom=j.zoom+=S),x=g.locks();var O={};for(var F in x)x[F].proxyCount=0;t&&S>-5&&3>S&&(u=I.zoom<0?1:1<<I.zoom,k?(ca(I,v,o,0,u,K),ca(o,j,I,0,u,K)):(f=Math.floor((I.column+o.column)/2),u=Math.max(0,Math.min(u-1,Math.floor((v.row+j.row)/2))),v=Math.min(4,I.zoom),f=f>>v<<v,u=u>>v<<v,K(f,f+1,u)));for(F in O)v=O[F],f=Math.pow(2,v.level=v.zoom-z.zoom),v.element.setAttribute("transform","translate("+(v.x=s.x*(v.column-z.column*f))+","+(v.y=s.y*(v.row-z.row*f))+")");for(F in x)F in O||(v=g.unload(F),v.element.parentNode.removeChild(v.element),delete v.proxyRefs);for(F in O)v=O[F],v.element.parentNode!=C[v.level]&&(C[v.level].appendChild(v.element),c.show&&c.show(v));g.flush(),c.dispatch({type:"move"})}var n,l,i,w,A,c={},g=c.cache=r.cache(d,h).size(512),k=!0,t=!0,q=r.svg("g"),C={};q.setAttribute("class","layer");for(var E=-4;-1>=E;E++)C[E]=q.appendChild(r.svg("g"));for(E=2;E>=1;E--)C[E]=q.appendChild(r.svg("g"));return C[0]=q.appendChild(r.svg("g")),c.map=function(B){if(!arguments.length)return i;if(i){if(i==B)return q.parentNode.appendChild(q),c;i.off("move",e).off("resize",e),q.parentNode.removeChild(q)}return(i=B)&&(i.container().appendChild(q),c.init&&c.init(q),i.on("move",e).on("resize",e),e()),c},c.container=function(){return q},c.levels=function(){return C},c.id=function(B){return arguments.length?(l=B,q.setAttribute("id",B),c):l},c.visible=function(B){return arguments.length?((t=B)?q.removeAttribute("visibility"):q.setAttribute("visibility","hidden"),i&&e(),c):t},c.transform=function(B){return arguments.length?(w=B,i&&e(),c):w},c.zoom=function(B){return arguments.length?(n="function"==typeof B||null==B?B:function(){return B},i&&e(),c):n},c.tile=function(B){return arguments.length?(k=B,i&&e(),c):k},c.reload=function(){return g.clear(),i&&e(),c},c.dispatch=r.dispatch(c),c.on("load",function(B){if(B.tile.proxyRefs){for(var K in B.tile.proxyRefs){var j=B.tile.proxyRefs[K];--j.proxyCount<=0&&g.unload(K)&&j.element.parentNode.removeChild(j.element)}delete B.tile.proxyRefs}}),c},r.image=function(){var h,d=r.layer(function(a){var m=a.element=r.svg("image"),e=d.map().tileSize();m.setAttribute("preserveAspectRatio","none"),m.setAttribute("width",e.x),m.setAttribute("height",e.y),"function"==typeof h?(m.setAttribute("opacity",0),e=h(a),null!=e?a.request=r.queue.image(m,e,function(c){delete a.request,a.ready=!0,a.img=c,m.removeAttribute("opacity"),d.dispatch({type:"load",tile:a})}):(a.ready=!0,d.dispatch({type:"load",tile:a}))):(a.ready=!0,null!=h&&m.setAttributeNS(r.ns.xlink,"href",h),d.dispatch({type:"load",tile:a}))},function(a){a.request&&a.request.abort(!0)});return d.url=function(a){return arguments.length?(h="string"==typeof a&&/{.}/.test(a)?r.url(a):a,d.reload()):h},d},r.geoJson=function(d){function h(j){var o={lat:0,lon:0};return function(x){o.lat=x[1],o.lon=x[0];var f=j(o);return x.x=f.x,x.y=f.y,f}}function a(j,o){return j&&j.type in C&&C[j.type](j,o)}function m(j,o,x){return j.type in E&&E[j.type](j,o,x)}function e(){var x,f,u,s,z,v,L,j=c.map().zoom(),o=c.cache.locks();if("fixed"==w){for(x in o)if((f=o[x]).scale!=j){for(L="scale("+Math.pow(2,f.zoom-j)+")",s=-1,z=(u=f.features).length;++s<z;)m((v=u[s]).data.geometry,v.element,L);f.scale=j}}else for(x in o){for(s=-1,z=(u=(f=o[x]).features).length;++s<z;)m((v=u[s]).data.geometry,v.element,"");delete f.scale}}var k,A,c=r.layer(function(j,o){function x(u){var s=[];switch(u.next&&(j.request=d(u.next.href,x)),u.type){case"FeatureCollection":for(var z=0;z<u.features.length;z++){var v=u.features[z],L=a(v.geometry,o);L&&s.push({element:f.appendChild(L),data:v})}break;case"Feature":(L=a(u.geometry,o))&&s.push({element:f.appendChild(L),data:u});break;default:(L=a(u,o))&&s.push({element:f.appendChild(L),data:{type:"Feature",geometry:u}})}j.ready=!0,s.push.apply(j.features,s),c.dispatch({type:"load",tile:j,features:s})}var f=j.element=r.svg("g");j.features=[],o=h(o(j).locationPoint),null!=k?j.request=d("function"==typeof k?k(j):k,x):x({type:"FeatureCollection",features:A||[]})},function(j){j.request&&j.request.abort(!0)}),g=c.container(),t=!0,n="org.polymaps."+r.id(),l="url(#"+n+")",i=g.insertBefore(r.svg("clipPath"),g.firstChild),q=i.appendChild(r.svg("rect")),w="auto";g.setAttribute("fill-rule","evenodd"),i.setAttribute("id",n),arguments.length||(d=r.queue.json);var C={Point:function(j,o){var x=o(j.coordinates),f=r.svg("circle");return f.setAttribute("r",4.5),f.setAttribute("transform","translate("+x.x+","+x.y+")"),f},MultiPoint:function(j,o){for(var u,s,x=r.svg("g"),f=j.coordinates,z=-1,v=f.length;++z<v;)s=x.appendChild(r.svg("circle")),s.setAttribute("r",4.5),s.setAttribute("transform","translate("+(u=o(f[z])).x+","+u.y+")");return x},LineString:function(j,o){for(var s,x=r.svg("path"),f=["M"],u=j.coordinates,z=-1,v=u.length;++z<v;)f.push((s=o(u[z])).x,",",s.y,"L");return f.pop(),f.length?(x.setAttribute("d",f.join("")),x):void 0},MultiLineString:function(j,o){for(var s,v,I,x=r.svg("path"),f=[],u=j.coordinates,z=-1,L=u.length;++z<L;){for(s=u[z],v=-1,I=s.length,f.push("M");++v<I;)f.push((p=o(s[v])).x,",",p.y,"L");f.pop()}return f.length?(x.setAttribute("d",f.join("")),x):void 0},Polygon:function(j,o){for(var s,v,I,x=r.svg("path"),f=[],u=j.coordinates,z=-1,L=u.length;++z<L;){for(s=u[z],v=-1,I=s.length-1,f.push("M");++v<I;)f.push((p=o(s[v])).x,",",p.y,"L");f[f.length-1]="Z"}return f.length?(x.setAttribute("d",f.join("")),x):void 0},MultiPolygon:function(j,o){for(var s,z,L,I,O,F,x=r.svg("path"),f=[],u=j.coordinates,v=-1,S=u.length;++v<S;)for(s=u[v],L=-1,O=s.length;++L<O;){for(z=s[L],I=-1,F=z.length-1,f.push("M");++I<F;)f.push((p=o(z[I])).x,",",p.y,"L");f[f.length-1]="Z"}return f.length?(x.setAttribute("d",f.join("")),x):void 0},GeometryCollection:function(j,o){for(var z,x=r.svg("g"),f=-1,u=j.geometries,s=u.length;++f<s;)(z=a(u[f],o))&&x.appendChild(z);return x}},E={Point:function(j,o,x){j=j.coordinates,o.setAttribute("transform","translate("+j.x+","+j.y+")"+x)},MultiPoint:function(j,o,x){j=j.coordinates;var f=-1,u=s.length;o=o.firstChild;for(var s;++f<u;)s=j[f],o.setAttribute("transform","translate("+s.x+","+s.y+")"+x),o=o.nextSibling}};c.url=function(j){return arguments.length?(k="string"==typeof j&&/{.}/.test(j)?r.url(j):j,null!=k&&(A=null),"string"==typeof k&&c.tile(!1),c.reload()):k},c.features=function(j){return arguments.length?((A=j)&&(k=null,c.tile(!1)),c.reload()):A},c.clip=function(j){if(!arguments.length)return t;t&&g.removeChild(i),(t=j)&&g.insertBefore(i,g.firstChild);var o=c.cache.locks();for(var x in o)t?o[x].element.setAttribute("clip-path",l):o[x].element.removeAttribute("clip-path");return c};var B=c.tile;c.tile=function(j){return arguments.length&&!j&&c.clip(j),B.apply(c,arguments)};var K=c.map;return c.map=function(j){if(j&&q){var o=j.tileSize();q.setAttribute("width",o.x),q.setAttribute("height",o.y)}return K.apply(c,arguments)},c.scale=function(j){return arguments.length?((w=j)?c.on("move",e):c.off("move",e),c.map()&&e(),c):w},c.show=function(j){return t?j.element.setAttribute("clip-path",l):j.element.removeAttribute("clip-path"),c.dispatch({type:"show",tile:j,features:j.features}),c},c.reshow=function(){var j=c.cache.locks();for(var o in j)c.show(j[o]);return c},c},r.dblclick=function(){function d(c){var g=m.zoom();g=c.shiftKey?Math.ceil(g)-g-1:1-g+Math.floor(g),"mouse"===a?m.zoomBy(g,m.mouse(c)):m.zoomBy(g)}var m,e,h={},a="mouse";return h.zoom=function(c){return arguments.length?(a=c,h):a},h.map=function(c){return arguments.length?(m&&(e.removeEventListener("dblclick",d,!1),e=null),(m=c)&&(e=m.container(),e.addEventListener("dblclick",d,!1)),h):m},h},r.drag=function(){function d(g){g.shiftKey||(c={x:g.clientX,y:g.clientY},m.focusableParent().focus(),g.preventDefault(),document.body.style.setProperty("cursor","move",null))}function h(g){c&&(m.panBy({x:g.clientX-c.x,y:g.clientY-c.y}),c.x=g.clientX,c.y=g.clientY)}var m,e,c,a={};return a.map=function(g){return arguments.length?(m&&(e.removeEventListener("mousedown",d,!1),e=null),(m=g)&&(e=m.container(),e.addEventListener("mousedown",d,!1)),a):m},window.addEventListener("mousemove",h,!1),window.addEventListener("mouseup",function(g){c&&(h(g),c=null,document.body.style.removeProperty("cursor"))},!1),a},r.wheel=function(){function d(){g=null}function h(i){var w,q=i.wheelDelta||-i.detail;if(q)if(e){try{l.scrollTop=1e3,l.dispatchEvent(i),q=1e3-l.scrollTop}catch(A){}q*=.005}else w=Date.now(),w-m>200?(q=q>0?1:-1,m=w):q=0;if(q)switch(c){case"mouse":w=k.mouse(i),g||(g=k.pointLocation(w)),k.off("move",d).zoomBy(q,w,g).on("move",d);break;case"location":k.zoomBy(q,k.locationPoint(g),g);break;default:k.zoomBy(q)}return i.preventDefault(),!1}var g,k,t,a={},m=0,e=!0,c="mouse",n=document.createElement("div"),l=document.createElement("div");return l.style.visibility="hidden",l.style.top="0px",l.style.height="0px",l.style.width="0px",l.style.overflowY="scroll",n.style.height="2000px",l.appendChild(n),document.body.appendChild(l),a.smooth=function(i){return arguments.length?(e=i,a):e},a.zoom=function(i,q){return arguments.length?(c=i,g=q,k&&("mouse"==c?k.on("move",d):k.off("move",d)),a):c},a.map=function(i){return arguments.length?(k&&(t.removeEventListener("mousemove",d,!1),t.removeEventListener("mousewheel",h,!1),t.removeEventListener("MozMousePixelScroll",h,!1),t=null,k.off("move",d)),(k=i)&&("mouse"==c&&k.on("move",d),t=k.container(),t.addEventListener("mousemove",d,!1),t.addEventListener("mousewheel",h,!1),t.addEventListener("MozMousePixelScroll",h,!1)),a):k},a},r.arrow=function(){function d(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var A=Date.now(),C=0,E=0;switch(w.keyCode){case 37:c.left||(g=A,c.left=1,c.right||(C=l));break;case 39:c.right||(g=A,c.right=1,c.left||(C=-l));break;case 38:c.up||(g=A,c.up=1,c.down||(E=l));break;case 40:c.down||(g=A,c.down=1,c.up||(E=-l));break;default:return}(C||E)&&i.panBy({x:C,y:E}),!k&&c.left|c.right|c.up|c.down&&(k=setInterval(m,n)),w.preventDefault()}}function h(w){switch(g=Date.now(),w.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}!k||c.left|c.right|c.up|c.down||(k=clearInterval(k)),w.preventDefault()}function a(w){switch(w.charCode){case 45:case 95:i.zoom(Math.ceil(i.zoom())-1);break;case 43:case 61:i.zoom(Math.floor(i.zoom())+1);break;default:return}w.preventDefault()}function m(){if(i&&!(Date.now()<g+t)){var w=(c.left-c.right)*l,A=(c.up-c.down)*l;(w||A)&&i.panBy({x:w,y:A})}}var k,i,q,e={},c={left:0,right:0,up:0,down:0},g=0,t=250,n=50,l=16;return e.map=function(w){return arguments.length?(i&&(q.removeEventListener("keypress",a,!1),q.removeEventListener("keydown",d,!1),q.removeEventListener("keyup",h,!1),q=null),(i=w)&&(q=i.focusableParent(),q.addEventListener("keypress",a,!1),q.addEventListener("keydown",d,!1),q.addEventListener("keyup",h,!1)),e):i},e.speed=function(w){return arguments.length?(l=w,e):l},e},r.hash=function(){function d(){var k=g(e);m!==k&&location.replace(m=k)}function h(){location.hash!==m&&c(e,(m=location.hash).substring(1))&&d()}var m,e,a={},c=function(k,t){var n=t.split("/").map(Number);if(n.length<3||n.some(isNaN))return!0;var l=k.size();k.zoomBy(n[0]-k.zoom(),{x:l.x/2,y:l.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,n[1])),lon:n[2]})},g=function(k){var t=k.center();k=k.zoom();var n=Math.max(0,Math.ceil(Math.log(k)/Math.LN2));return"#"+k.toFixed(2)+"/"+t.lat.toFixed(n)+"/"+t.lon.toFixed(n)};return a.map=function(k){return arguments.length?(e&&(e.off("move",d),window.removeEventListener("hashchange",h,!1)),(e=k)&&(e.on("move",d),window.addEventListener("hashchange",h,!1),location.hash?h():d()),a):e},a.parser=function(k){return arguments.length?(c=k,a):c},a.formatter=function(k){return arguments.length?(g=k,a):g},a},r.touch=function(){function d(n){var l=-1,i=n.touches.length,q=Date.now();if(1==i&&300>q-c){var w=a.zoom();a.zoomBy(1-w+Math.floor(w),a.mouse(n.touches[0])),n.preventDefault()}for(c=q,g=a.zoom(),k=a.angle();++l<i;)q=n.touches[l],t[q.identifier]=a.pointLocation(a.mouse(q))}var a,m,g,k,h={},e=!1,c=0,t={};return window.addEventListener("touchmove",function(n){switch(n.touches.length){case 1:var l=n.touches[0];a.zoomBy(0,a.mouse(l),t[l.identifier]),n.preventDefault();break;case 2:l=n.touches[0];var i=n.touches[1],q=a.mouse(l),w=a.mouse(i);q={x:(q.x+w.x)/2,y:(q.y+w.y)/2},l=r.map.locationCoordinate(t[l.identifier]),i=r.map.locationCoordinate(t[i.identifier]),i=r.map.coordinateLocation({row:(l.row+i.row)/2,column:(l.column+i.column)/2,zoom:0}),a.zoomBy(Math.log(n.scale)/Math.LN2+g-a.zoom(),q,i),e&&a.angle(n.rotation/180*Math.PI+k),n.preventDefault()}},!1),h.rotate=function(n){return arguments.length?(e=n,h):e},h.map=function(n){return arguments.length?(a&&(m.removeEventListener("touchstart",d,!1),m=null),(a=n)&&(m=a.container(),m.addEventListener("touchstart",d,!1)),h):a},h},r.interact=function(){var d={},h=r.drag(),a=r.wheel(),m=r.dblclick(),e=r.touch(),c=r.arrow();return d.map=function(g){return h.map(g),a.map(g),m.map(g),e.map(g),c.map(g),d},d},r.compass=function(){function d(y){return B.setAttribute("class","compass active"),I||(I=setInterval(h,u)),S&&H.panBy(S),x=Date.now(),l(y)}function h(){S&&Date.now()>x+f&&H.panBy(S)}function a(y){return y.shiftKey?(F={x0:H.mouse(y)},H.focusableParent().focus(),l(y)):void 0}function m(y){F&&(F.x1=H.mouse(y),N.setAttribute("x",Math.min(F.x0.x,F.x1.x)),N.setAttribute("y",Math.min(F.x0.y,F.x1.y)),N.setAttribute("width",Math.abs(F.x0.x-F.x1.x)),N.setAttribute("height",Math.abs(F.x0.y-F.x1.y)),N.removeAttribute("display"))}function e(){B.setAttribute("class","compass"),F&&(F.x1&&(H.extent([H.pointLocation({x:Math.min(F.x0.x,F.x1.x),y:Math.max(F.x0.y,F.x1.y)}),H.pointLocation({x:Math.max(F.x0.x,F.x1.x),y:Math.min(F.x0.y,F.x1.y)})]),N.setAttribute("display","none")),F=null),I&&(clearInterval(I),I=0)}function c(y){return function(){y?this.setAttribute("class","active"):this.removeAttribute("class"),S=y}}function g(y){return function(D){B.setAttribute("class","compass active");var G=H.zoom();return H.zoom(0>y?Math.ceil(G)-1:Math.floor(G)+1),l(D)}}function k(y){return function(D){return H.zoom(y),l(D)}}function t(){this.setAttribute("class","active")}function n(){this.removeAttribute("class")}function l(y){return y.stopPropagation(),y.preventDefault(),!1}function i(y){var D=Math.SQRT1_2*j,G=.7*j,J=.2*j,M=r.svg("g"),P=M.appendChild(r.svg("path")),Q=M.appendChild(r.svg("path"));return P.setAttribute("class","direction"),P.setAttribute("pointer-events","all"),P.setAttribute("d","M0,0L"+D+","+D+"A"+j+","+j+" 0 0,1 "+-D+","+D+"Z"),Q.setAttribute("class","chevron"),Q.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J)),Q.setAttribute("pointer-events","none"),M.addEventListener("mousedown",d,!1),M.addEventListener("mouseover",c(y),!1),M.addEventListener("mouseout",c(null),!1),M.addEventListener("dblclick",l,!1),M}function q(y){var D=.4*j,G=D/2,J=r.svg("g"),M=J.appendChild(r.svg("path")),P=J.appendChild(r.svg("path")),Q=J.appendChild(r.svg("path")),X=J.appendChild(r.svg("path"));return M.setAttribute("class","back"),M.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z"),P.setAttribute("class","direction"),P.setAttribute("d",M.getAttribute("d")),Q.setAttribute("class","chevron"),Q.setAttribute("d","M"+-G+","+-D+"H"+G+(y>0?"M0,"+(-D-G)+"V"+-G:"")),X.setAttribute("class","fore"),X.setAttribute("fill","none"),X.setAttribute("d",M.getAttribute("d")),J.addEventListener("mousedown",g(y),!1),J.addEventListener("mouseover",t,!1),J.addEventListener("mouseout",n,!1),J.addEventListener("dblclick",l,!1),J}function w(y){var D=.2*j,G=.4*j,J=r.svg("g"),M=J.appendChild(r.svg("rect")),P=J.appendChild(r.svg("path"));return M.setAttribute("pointer-events","all"),M.setAttribute("fill","none"),M.setAttribute("x",-G),M.setAttribute("y",-.75*G),M.setAttribute("width",2*G),M.setAttribute("height",1.5*G),P.setAttribute("class","chevron"),P.setAttribute("d","M"+-D+",0H"+D),J.addEventListener("mousedown",k(y),!1),J.addEventListener("dblclick",l,!1),J}function A(){var y=j+6,D=y,G=H.size();switch(s){case"top-left":break;case"top-right":y=G.x-y;break;case"bottom-left":D=G.y-D;break;case"bottom-right":y=G.x-y,D=G.y-D}B.setAttribute("transform","translate("+y+","+D+")"),N.setAttribute("transform","translate("+-y+","+-D+")");for(var J in K)J==H.zoom()?K[J].setAttribute("class","active"):K[J].removeAttribute("class")}function C(){for(;B.lastChild;)B.removeChild(B.lastChild);if(B.appendChild(N),"none"!=L){O=B.appendChild(r.svg("g")),O.setAttribute("class","pan");var y=O.appendChild(r.svg("circle"));y.setAttribute("class","back"),y.setAttribute("r",j),O.appendChild(i({x:0,y:-o})).setAttribute("transform","rotate(0)"),O.appendChild(i({x:o,y:0})).setAttribute("transform","rotate(90)"),O.appendChild(i({x:0,y:o})).setAttribute("transform","rotate(180)"),O.appendChild(i({x:-o,y:0})).setAttribute("transform","rotate(270)"),y=O.appendChild(r.svg("circle")),y.setAttribute("fill","none"),y.setAttribute("class","fore"),y.setAttribute("r",j)}else O=null;if("none"!=z){if(v=B.appendChild(r.svg("g")),v.setAttribute("class","zoom"),y=-.5,"big"==z){K={};var D=H.zoomRange()[0];for(y=0;D<=H.zoomRange()[1];D++,y++)(K[D]=v.appendChild(w(D))).setAttribute("transform","translate(0,"+.4*-(y+.75)*j+")")}D="none"==L?.4:2,v.setAttribute("transform","translate(0,"+j*(/^top-/.test(s)?D+.4*(y+.5):-D)+")"),v.appendChild(q(1)).setAttribute("transform","translate(0,"+.4*-(y+.5)*j+")"),v.appendChild(q(-1)).setAttribute("transform","scale(-1)")}else v=null;A()}var v,I,S,O,F,H,T,U,E={},B=r.svg("g"),K={},j=30,o=16,x=0,f=250,u=50,s="top-left",z="small",L="small",N=r.svg("rect");return B.setAttribute("class","compass"),N.setAttribute("class","back fore"),N.setAttribute("pointer-events","none"),N.setAttribute("display","none"),E.radius=function(y){return arguments.length?(j=y,H&&C(),E):j},E.speed=function(y){return arguments.length?(o=y,E):j},E.position=function(y){return arguments.length?(s=y,H&&C(),E):s},E.pan=function(y){return arguments.length?(L=y,H&&C(),E):L},E.zoom=function(y){return arguments.length?(z=y,H&&C(),E):z},E.map=function(y){return arguments.length?(H&&(T.removeEventListener("mousedown",a,!1),T.removeChild(B),T=null,U.removeEventListener("mousemove",m,!1),U.removeEventListener("mouseup",e,!1),U=null,H.off("move",A).off("resize",A)),(H=y)&&(T=H.container(),T.appendChild(B),T.addEventListener("mousedown",a,!1),U=T.ownerDocument.defaultView,U.addEventListener("mousemove",m,!1),U.addEventListener("mouseup",e,!1),H.on("move",A).on("resize",A),C()),E):H},E},r.grid=function(){function d(){var e=m.firstChild,c=a.size(),g=a.pointLocation(Y);a.pointLocation(c);var k=Math.pow(2,4-Math.round(a.zoom()));g.lat=Math.floor(g.lat/k)*k,g.lon=Math.ceil(g.lon/k)*k;for(var t;(t=a.locationPoint(g).x)<=c.x;g.lon+=k)e||(e=m.appendChild(r.svg("line"))),e.setAttribute("x1",t),e.setAttribute("x2",t),e.setAttribute("y1",0),e.setAttribute("y2",c.y),e=e.nextSibling;for(;(t=a.locationPoint(g).y)<=c.y;g.lat-=k)e||(e=m.appendChild(r.svg("line"))),e.setAttribute("y1",t),e.setAttribute("y2",t),e.setAttribute("x1",0),e.setAttribute("x2",c.x),e=e.nextSibling;for(;e;)c=e.nextSibling,m.removeChild(e),e=c}var a,h={},m=r.svg("g");return m.setAttribute("class","grid"),h.map=function(e){return arguments.length?(a&&(m.parentNode.removeChild(m),a.off("move",d).off("resize",d)),(a=e)&&(a.on("move",d).on("resize",d),a.container().appendChild(m),a.dispatch({type:"move"})),h):a},h},r.stylist=function(){function d(e){var t,n,l,i,q,w,c=e.features.length,g=h.length,k=a.length;for(q=0;c>q;++q)if(n=(t=e.features[q]).element){for(t=t.data,w=0;g>w;++w)i=(l=h[w]).value,"function"==typeof i&&(i=i.call(null,t)),null==i?l.name.local?n.removeAttributeNS(l.name.space,l.name.local):n.removeAttribute(l.name):l.name.local?n.setAttributeNS(l.name.space,l.name.local,i):n.setAttribute(l.name,i);for(w=0;k>w;++w)i=(l=a[w]).value,"function"==typeof i&&(i=i.call(null,t)),null==i?n.style.removeProperty(l.name):n.style.setProperty(l.name,i,l.priority);if(i=m){for("function"==typeof i&&(i=i.call(null,t));n.lastChild;)n.removeChild(n.lastChild);null!=i&&n.appendChild(r.svg("title")).appendChild(document.createTextNode(i))}}}var m,h=[],a=[];return d.attr=function(e,c){return h.push({name:ea(e),value:c}),d},d.style=function(e,c,g){return a.push({name:e,value:c,priority:arguments.length<3?null:g}),d},d.title=function(e){return m=e,d},d}}(org.polymaps);