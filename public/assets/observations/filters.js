function selectAllIconicTaxa(){$(".iconic_taxon_filter input").each(function(){this.checked=!0,$(this).siblings("label").addClass("selected")})}function deSelectAllIconicTaxa(){$(".iconic_taxon_filter input").each(function(){this.checked=!1,$(this).siblings("label").removeClass("selected")})}function toggleFilters(link,options){var options=$.extend({},options);0==$("#filters:visible").length?showFilters(link,options):hideFilters(link,options)}function showFilters(link,options){var options=$.extend({},options);$("#filters").show(),options.skipClass||$(link).addClass("open"),$("#filters input[name=filters_open]").val(!0),0==$("#filters .simpleTaxonSelector").length&&$("#filters input[name=taxon_name]").simpleTaxonSelector(),0==$("#place_filter .ui-widget").length&&$("#filters input[name=place_id]").chooser({collectionUrl:"/places/autocomplete.json",resourceUrl:"/places/{{id}}.json?partial=autocomplete_item",chosen:eval("("+$("#filters input[name=place_id]").attr("data-json")+")")})}function hideFilters(link,options){var options=$.extend({},options);$("#filters").hide(),options.skipClass||$(link).removeClass("open"),$("#filters input[name=filters_open]").val(!1)}function deselectAll(){$("#filters :text, #fitlers :input[type=hidden], #fitlers select").val(null),$("#filters :input:checkbox").attr("checked",!1),deSelectAllIconicTaxa(),$("#filters input[name=place_id]").chooser("clear",{bubble:!1}),$.fn.simpleTaxonSelector.unSelectTaxon("#filters .simpleTaxonSelector")}function setFiltersFromQuery(query){deselectAll();var params=$.deparam(query);$.each(params,function(k,v){"iconic_taxa"!=k&&"has"!=k&&$('#filters :input:radio[name="'+k+'"][value="'+v+'"]').attr("checked",!0),$("#filters :input[name="+k+"]").not(":checkbox, :radio").val(v),"place_id"==k?$("#filters input[name=place_id]").chooser("selectId",v):"taxon_id"==k?$.fn.simpleTaxonSelector.selectTaxonFromId("#filters .simpleTaxonSelector",v):"iconic_taxa"==k||"has"==k?$.each(v,function(i,av){$selection=$('#filters :input:checkbox[name="'+k+'[]"][value='+av+"]"),$selection.attr("checked",!0),"iconic_taxa"==k&&$selection.siblings("label").addClass("selected")}):"projects"==k&&$('#filters :input[name="projects[]"]').val(v)})}$(document).ready(function(){$(".iconic_taxon_filter input").change(function(){$(this).siblings("label").toggleClass("selected")}),$(".iconic_taxon_filter input:checked").each(function(){$(this).siblings("label").addClass("selected")})});