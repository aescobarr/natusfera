function showMapView(){$(".observations.map").show(),$(".observations .headerrow").hide(),$("#mapobservations").css({width:"300px",height:"500px"}),$("#mapobservations").removeClass("table"),$("#mapobservations").addClass("mini"),$("#mapdivider").show(),$("#mapcontrols").show(),$("#mapdivider").hasClass("closed")&&$("#mapobservations").hide(),window.map&&(google.maps.event.trigger(window.map,"resize"),window.map._oldCenter?(window.map.setCenter(window.map._oldCenter),window.map._oldCenter=null):window.map.zoomToObservations()),alterLinkParams({view:"map"}),$("#view_input").val("map"),setPreference("observations_view","map")}function showTableView(){window.map&&(window.map._oldCenter=window.map.getCenter()),$(".observations.map").hide(),$("#mapdivider").hide(),$("#mapcontrols").hide(),$(".observations .headerrow").show(),$("#mapobservations").show(),$("#mapobservations").css({width:"950px",height:"auto"}),$("#mapobservations").removeClass("mini"),$("#mapobservations").addClass("table"),alterLinkParams({view:"table"}),$("#view_input").val("table"),setPreference("observations_view","table")}function alterLinkParams(params){$('#wrapper a[href^="/observations?"]').each(function(){var href=$(this).attr("href"),path=jQuery.url.setUrl(href).attr("path"),queryString=jQuery.url.setUrl(href).attr("query");queryObj=$.extend({},queryString2Obj(queryString),params),$(this).attr("href",path+"?"+obj2QueryString(queryObj))})}function queryString2Obj(str){var pieces=str.split("&"),obj={};return jQuery.each(pieces,function(){var bits=this.split("=");obj[bits[0]]=bits[1]}),obj}function obj2QueryString(obj){var pieces=[];return jQuery.each(obj,function(k,v){pieces.push(k+"="+v)}),pieces.join("&")}function redoSearchInMapArea(){$("#redo_search_in_map_area_button").hide(),$("#redo_search_in_map_area_loading").show();var bounds=map.getBounds();$("#filters input[name=swlat]").val(bounds.getSouthWest().lat()),$("#filters input[name=swlng]").val(bounds.getSouthWest().lng()),$("#filters input[name=nelat]").val(bounds.getNorthEast().lat()),$("#filters input[name=nelng]").val(bounds.getNorthEast().lng()),$("#submit_filters_button").click()}function linkWithBoundingBox(url){url+=url.match(/&/)?"&":"?";var bounds=map.getBounds();url+="swlat="+bounds.getSouthWest().lat(),url+="&swlng="+bounds.getSouthWest().lng(),url+="&nelat="+bounds.getNorthEast().lat(),url+="&nelng="+bounds.getNorthEast().lng(),window.location=url}$(document).ready(function(){$("#tablelink").click(function(){return $("#controls .modal_link").removeClass("selected"),$(this).addClass("selected"),showTableView(),jQuery.browser.msie&&parseInt(jQuery.browser.version.substr(0,1))<7?void 0:!1}),$("#maplink").click(function(){return $("#controls .modal_link").removeClass("selected"),$(this).addClass("selected"),showMapView(),jQuery.browser.msie&&parseInt(jQuery.browser.version.substr(0,1))<7?void 0:!1}),$("#filterslink").click(function(){return toggleFilters(this,{skipClass:!0}),$(this).parent().toggleClass("open"),$(this).parent().hasClass("open")?alterLinkParams({filters_open:"true"}):alterLinkParams({filters_open:"false"}),!1})});